<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimo dia de Raspu (UDR)</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;700&display=swap" rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        /* --- ESTILOS BASE --- */
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #0f172a; /* Slate 900 */
            color: #f8fafc;
            font-family: 'Outfit', sans-serif;
            overflow: hidden;
            position: relative;
        }

        /* --- CANVAS CONFETI (Z-index mÃ¡s alto para el final) --- */
        #confetti-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none; z-index: 100;
        }

        /* --- CONTENEDOR PRINCIPAL (Z-index medio) --- */
        .container {
            text-align: center; padding: 2rem; animation: fadeIn 1.5s ease-in-out; 
            z-index: 50; /* Por encima de la lluvia, debajo del confeti */
            position: relative;
            background: radial-gradient(circle at center, rgba(15, 23, 42, 0.8) 0%, rgba(15, 23, 42, 0) 70%); /* Sutil fondo para leer mejor si pasa una frase por detrÃ¡s */
        }

        /* --- ESTILOS DE LA LLUVIA DE FRASES --- */
        .rain-phrase {
            position: fixed;
            top: -50px; /* Empiezan fuera de pantalla */
            color: rgba(148, 163, 184, 0.4); /* Color Slate 400 muy transparente y sutil */
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1px;
            pointer-events: none; /* No interfieren con clicks */
            z-index: 10; /* DetrÃ¡s del contador principal */
            white-space: nowrap;
            will-change: transform, opacity; /* OptimizaciÃ³n de rendimiento */
        }

        /* AnimaciÃ³n de caÃ­da */
        @keyframes fall {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            10% { opacity: 0.6; }
            90% { opacity: 0.6; }
            100% { transform: translateY(110vh) rotate(5deg); opacity: 0; }
        }

        /* --- RESTO DEL CSS DEL CONTADOR --- */
        h1 {
            font-weight: 300; letter-spacing: 2px; text-transform: uppercase;
            font-size: 1.5rem; margin-bottom: 3rem; color: #94a3b8;
        }
        .countdown {
            display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap;
        }
        .time-box {
            display: flex; flex-direction: column; align-items: center; min-width: 100px;
        }
        .number {
            font-size: 5rem; font-weight: 700; line-height: 1;
            background: -webkit-linear-gradient(#fff, #cbd5e1);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-variant-numeric: tabular-nums;
        }
        .label {
            font-size: 0.85rem; text-transform: uppercase; letter-spacing: 1px;
            margin-top: 0.5rem; color: #64748b;
        }
        
        /* Estilos del Mensaje Final */
        #message {
            display: none; 
            font-size: 2.5rem; 
            color: #4ade80;
            margin-top: 2rem; 
            font-weight: 700; 
            /* Agregamos una transiciÃ³n suave de opacidad para el cambio de texto */
            transition: opacity 0.5s ease-in-out;
            opacity: 0; /* Empieza invisible para el efecto fade-in */
        }
        
        /* Clase para mostrar el mensaje */
        #message.visible {
            opacity: 1;
        }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes popIn { 0% { transform: scale(0.8); opacity: 0; } 80% { transform: scale(1.05); } 100% { transform: scale(1); opacity: 1;} }

        @media (max-width: 600px) {
            .countdown { gap: 1rem; }
            .number { font-size: 3rem; }
            .time-box { min-width: 70px; }
            h1 { font-size: 1.1rem; }
            .rain-phrase { font-size: 0.8rem !important; } /* Frases mÃ¡s pequeÃ±as en mÃ³vil */
        }
    </style>
</head>
<body>

    <canvas id="confetti-canvas"></canvas>

    <div class="container">
        <h1>Ultimo dia de Raspu (UDR)</h1>
        
        <div class="countdown" id="countdown-ui">
            <div class="time-box">
                <span class="number" id="days">00</span>
                <span class="label">DÃ­as</span>
            </div>
            <div class="time-box">
                <span class="number" id="hours">00</span>
                <span class="label">Horas</span>
            </div>
            <div class="time-box">
                <span class="number" id="minutes">00</span>
                <span class="label">Minutos</span>
            </div>
            <div class="time-box">
                <span class="number" id="seconds">00</span>
                <span class="label">Segundos</span>
            </div>
        </div>

        <div id="message"></div>
    </div>

    <script>
        console.log("last version: 2026-01-30 08:00");
        // ==========================================
        // --- LÃ“GICA DE LA LLUVIA DE FRASES ---
        // ==========================================

        // 1. DATA HARDCODEADA (AquÃ­ es donde conectarÃ­as tu API en el futuro)
        let phrases = [
            "En todos lados se cuecen habas",
            "Uno es padre hasta que se muere",
            "Tanto va el cantaro a la fuente... que al final se llena",
            "El ser humano es hijo del rigor",
            "Donde come capitÃ¡n, no come marinero",
            "El buey solo bien se lame",
            "Uno no coincide por casualidad",
            "No te cae un angel... si andas por el infierno",
            "Hay gente que hace ruido al entrar a un lugar, por que no tiene luz interior",
            "SÃ­ tenes que estar cuidando a tu mujer, es por que tu mujer no te pertenece",
            "Cuando el rÃ­o suena, es por que agua trae",
            "Todos los nudos caen al peine"
        ];

        // Frases finales (para rotar cuando termine)
        const finalMessages = [
            "Â¡Fin de una era! <br> âœ¨ UDR âœ¨",
            "Â¡Eres libre, Raspu! <br> ðŸš€ Nada como el placer de acabar...",
            "Condena Cumplida <br> Â¡Exitos en lo que viene!ðŸŽ¯",
            "Â¡A disfrutar la vida! <br> ðŸ˜Ž La que viene",
            "Game Over! <br> âœ¨ NADA âœ¨"
        ];

        /* --- EJEMPLO DE CÃ“MO SERÃA CON API EN EL FUTURO ---
        // function fetchPhrases() {
        //    fetch('https://tu-api.com/frases')
        //        .then(response => response.json())
        //        .then(data => {
        //            // Asumiendo que la API devuelve un array de strings
        //            phrases = data; 
        //        })
        //        .catch(error => console.error('Error fetching phrases:', error));
        // }
        // fetchPhrases(); // Llamar al inicio
        ---------------------------------------------------- */


        // 2. FUNCIÃ“N PARA CREAR UNA GOTA DE LLUVIA
        function createRainDrop() {
            if (phrases.length === 0) return;

            const drop = document.createElement('div');
            drop.classList.add('rain-phrase');
            
            // Elegir frase aleatoria
            drop.innerText = phrases[Math.floor(Math.random() * phrases.length)];

            // PosiciÃ³n horizontal aleatoria
            drop.style.left = Math.random() * 95 + 'vw';

            // VariaciÃ³n en la velocidad de caÃ­da (entre 5s y 12s)
            const duration = Math.random() * 7 + 5 + 's';
            drop.style.animation = `fall ${duration} linear forwards`;

            // VariaciÃ³n en el tamaÃ±o de fuente (entre 0.9rem y 1.5rem)
            const fontSize = Math.random() * 0.6 + 0.9 + 'rem';
            drop.style.fontSize = fontSize;

            document.body.appendChild(drop);

            // LIMPIEZA: Eliminar el elemento cuando termine la animaciÃ³n
            drop.addEventListener('animationend', () => {
                drop.remove();
            });
        }

        // Iniciar la lluvia: crear una gota cada cierto tiempo (ej. cada 800ms)
        let rainInterval = setInterval(createRainDrop, 800);

        let msgIndex = 0;
        let messageInterval = null;

        function rotateFinalMessage() {
            const msgEl = document.getElementById("message");
            
            // 1. Ocultamos el texto (fade out)
            msgEl.classList.remove("visible");

            // 2. Esperamos medio segundo, cambiamos texto y mostramos (fade in)
            setTimeout(() => {
                msgEl.innerHTML = finalMessages[msgIndex];
                msgEl.classList.add("visible");
                
                // Actualizar Ã­ndice para la prÃ³xima (bucle infinito)
                msgIndex = (msgIndex + 1) % finalMessages.length;
            }, 500); // 500ms coincide con la transiciÃ³n CSS
        }

        // ==========================================
        // --- LÃ“GICA DE LA CUENTA REGRESIVA SIMPLE ---
        // ==========================================

        const TARGET_DATE = new Date("January 30, 2026 16:20:00").getTime();
        // const TARGET_DATE = new Date().getTime() + 5000; // DESCOMENTAR PARA PROBAR FINAL (5 segundos)

        let celebrationStarted = false;

        function updateCountdown() {
            const now = new Date().getTime();
            const distance = TARGET_DATE - now;

            // CÃ¡lculos simples de tiempo restante
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("days").innerText = days < 10 ? "0" + Math.max(0, days) : days;
            document.getElementById("hours").innerText = hours < 10 ? "0" + Math.max(0, hours) : hours;
            document.getElementById("minutes").innerText = minutes < 10 ? "0" + Math.max(0, minutes) : minutes;
            document.getElementById("seconds").innerText = seconds < 10 ? "0" + Math.max(0, seconds) : seconds;

            // CUANDO TERMINA LA CUENTA
            if (distance < 0) {
                clearInterval(countdownInterval);
                // Opcional: detener la lluvia de frases al finalizar
                clearInterval(rainInterval); 

                document.getElementById("countdown-ui").style.display = "none";
                document.getElementById("message").style.display = "block";

                // Iniciar la rotaciÃ³n de mensajes si no ha empezado
                if (!messageInterval) {
                    rotateFinalMessage(); // Muestra el primero inmediatamente
                    messageInterval = setInterval(rotateFinalMessage, 4000); // Cambia cada 4 segundos
                }
                
                if (!celebrationStarted) {
                    celebrationStarted = true;
                    // ConfiguraciÃ³n del confeti (igual que antes)
                    var myCanvas = document.getElementById('confetti-canvas');
                    var myConfetti = confetti.create(myCanvas, { resize: true, useWorker: true });
                    const colors = ['#4ade80', '#ffffff', '#cbd5e1'];
                    (function frame() {
                        myConfetti({ particleCount: 3, angle: 60, spread: 55, origin: { x: 0, y: 0.8 }, colors: colors, scalar: 1.2 });
                        myConfetti({ particleCount: 3, angle: 120, spread: 55, origin: { x: 1, y: 0.8 }, colors: colors, scalar: 1.2 });
                        requestAnimationFrame(frame);
                    }());
                }
            }
        }

        const countdownInterval = setInterval(updateCountdown, 1000);
        updateCountdown();
    </script>
</body>
</html>